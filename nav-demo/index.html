<!DOCTYPE html>
<html>
  
  <head>
    <meta charset="utf-8">
    <title>my navigation</title>
    <link rel="stylesheet" href="./style.css">
    <body>
      <header></header>
      <main>
        <div id="main" class="wrapper">
        </div>
      </main>
      <footer></footer>
      <script>
        var keys = {
          0:['q','w','e','r','t','y','u','i','o','p'],
          1:['a','s','d','f','g','h','j','k','l'],
          2:['z','x','c','v','b','n','m'],
          length:3
        }
        var webs ={
          q:'qq.com',
          w:'weibo.com',
          e:'ele.me',
          r:'renren.com',
          t:'tianya.com',
          y:'yahoo.cn',
          u:'uc.com',
          i:'iqiyi.com',
          o:'opera.com',
          p:undefined,
          a:'amazon.cn',
          m:'mcdonalds.com.cn',
          s: 'portal.shadowsocks.nu/index.php'
        }
        
        var websInLocalStorage = JSON.parse(localStorage.getItem('newWeb') ||'null')
        //取出localstorage中的newWeb对应的webs
        if(websInLocalStorage) {
          webs = websInLocalStorage
        }


        //go thru keys and generate kbd tags
        index = 0
        while (index<keys['length']){
          createDiv = document.createElement('div')
          main.appendChild(createDiv)
          row=keys[index] // first arr, second arr and third
         
          index2=0
          while(index2<row['length']){
            ekbd=document.createElement('kbd')
            ekbd.textContent = row[index2]
            createDiv.appendChild(ekbd)
            createButton = document.createElement('button')
            createButton.textContent = 'E'
            createButton.id=row[index2]
            ekbd.appendChild(createButton)
            
            createButton.onclick = function(clickButton){
              getClick = clickButton['target']['id']
              x = prompt('New website')
              webs[getClick] = x // webs changed
              localStorage.setItem('newWeb',JSON.stringify(webs))
              
            }
            
            
            index2 = index2 + 1
          }
          
          index = index+1
        }

        document.onkeypress=function(whatUserType){
          type=whatUserType['key']
          website = webs[type]
        
          //location.href = 'http://' + website
          window.open('http://'+website, '_blank')
        }

      </script>
    </body>
  </head>
</html>